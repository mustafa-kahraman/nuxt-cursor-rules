---
description: 
globs: 
alwaysApply: false
---
# Genel Tipler, Åemalar ve Modeller KurallarÄ±

## ğŸ¯ Kural Tipi YapÄ±landÄ±rmasÄ±

### Birincil Kural Tipi SeÃ§imi
- [x] Her zaman: Her istekte otomatik olarak uygulanÄ±r (Ã¶rn. kod stili, gÃ¼venlik kontrolleri) - *Tiplerin her zaman tutarlÄ± olmasÄ± gerektiÄŸi iÃ§in bu seÃ§ilebilir.*
- [ ] Manuel: YalnÄ±zca manuel olarak Ã§aÄŸrÄ±ldÄ±ÄŸÄ±nda kullanÄ±lÄ±r
- [ ] Otomatik EklenmiÅŸ: Belirli dosyalar/durumlar iÃ§in otomatik olarak tetiklenir
- [ ] Ajan TarafÄ±ndan Ä°stenen: AI tarafÄ±ndan gerektiÄŸinde Ã§aÄŸrÄ±lÄ±r

type: always # Veya projenin ihtiyacÄ±na gÃ¶re 'manual'/'auto attached' olabilir
description: Uygulama genelinde kullanÄ±lacak temel TypeScript arayÃ¼zlerini, tiplerini, enum'larÄ±nÄ± ve potansiyel olarak Zod gibi doÄŸrulama ÅŸemalarÄ±nÄ± tanÄ±mlar.
globs: types/**/*.ts, interfaces/**/*.ts, server/types/**/*.ts # Proje yapÄ±sÄ±na gÃ¶re ayarlanabilir

## ğŸ“‹ Sorumluluklar

### TypeScript ArayÃ¼zleri (Interfaces)
- Uygulama genelindeki temel veri yapÄ±larÄ± iÃ§in (Ã¶rn. `IUser`, `IProduct`, `IApiResponse`) arayÃ¼zler tanÄ±mlayÄ±n.
- ArayÃ¼z isimlerini `I` Ã¶n eki ile baÅŸlatÄ±n (yaygÄ±n bir pratik).
- AlanlarÄ± ve tiplerini aÃ§Ä±kÃ§a belirtin.
- Ä°steÄŸe baÄŸlÄ± alanlar iÃ§in `?` kullanÄ±n.

### TypeScript Tipleri (Types)
- KarmaÅŸÄ±k veya birleÅŸik tipler iÃ§in `type` anahtar kelimesini kullanÄ±n (Ã¶rn. `type Status = 'pending' | 'completed' | 'failed';`).
- YardÄ±mcÄ± tipler veya belirli formatlar iÃ§in tipler oluÅŸturun (Ã¶rn. `type IsoDateString = string;`).

### Enum Sabitleri (Enums)
- Belirli bir grup sabit deÄŸer iÃ§in (Ã¶rn. kullanÄ±cÄ± rolleri, sipariÅŸ durumlarÄ±) `enum` kullanÄ±n.
- String veya numeric enum'lar tanÄ±mlanabilir.

### DoÄŸrulama ÅemalarÄ± (Ã¶rn. Zod)
- API isteklerini veya veritabanÄ±na kaydedilecek verileri doÄŸrulamak iÃ§in Zod gibi kÃ¼tÃ¼phanelerle merkezi ÅŸemalar tanÄ±mlayÄ±n.
- Bu ÅŸemalar hem API endpoint kurallarÄ±nda (`@api-endpoints.mdc`) hem de model kurallarÄ±nda (`@mongoose-models.mdc`) kullanÄ±labilir.
- ÅemalarÄ± ilgili arayÃ¼zlerle tutarlÄ± tutun.

### PaylaÅŸÄ±lan YardÄ±mcÄ± Tipler
- Proje genelinde sÄ±k kullanÄ±lan yardÄ±mcÄ± tipleri (Ã¶rn. `Pagination<T>`, `SortOrder`) burada tanÄ±mlayÄ±n.

## ğŸ§© Anahtar BileÅŸenler
- ArayÃ¼zler (`interface`): Nesne yapÄ±larÄ±nÄ±n sÃ¶zleÅŸmeleri.
- Tipler (`type`): Ã–zel tip takma adlarÄ± ve birleÅŸimleri.
- Enumlar (`enum`): Sabit deÄŸer kÃ¼meleri.
- DoÄŸrulama ÅemalarÄ± (Ã¶rn. `z.object`): Veri doÄŸrulama kurallarÄ±.

## ğŸ“¦ BaÄŸÄ±mlÄ±lÄ±klar

### Gerekli Paketler
- `typescript`: (Projenin temel baÄŸÄ±mlÄ±lÄ±ÄŸÄ±)
- `zod`: (Ä°steÄŸe baÄŸlÄ±, eÄŸer doÄŸrulama ÅŸemalarÄ± iÃ§in kullanÄ±lÄ±yorsa)

### Gerekli Kurallar
- Yok (Bu genellikle temel kuraldÄ±r)

## âœ… DoÄŸru KullanÄ±m
```typescript
// types/shared.types.ts veya interfaces/user.interface.ts

// --- ArayÃ¼zler --- 
export interface IBaseModel {
  _id: string; // Veya veritabanÄ± ID tipi
  createdAt: Date;
  updatedAt: Date;
}

export interface IUser extends IBaseModel {
  name: string;
  email: string;
  role: UserRole;
  isActive?: boolean;
}

export interface IApiResponse<T> {
  status: 'success' | 'error';
  data?: T;
  message?: string;
  error?: any; // Daha spesifik bir hata tipi tanÄ±mlanabilir
}

// --- Enumlar --- 
export enum UserRole {
  Admin = 'ADMIN',
  Editor = 'EDITOR',
  Viewer = 'VIEWER',
}

// --- Tipler --- 
export type Status = 'pending' | 'processing' | 'completed' | 'failed';

export type SortDirection = 'asc' | 'desc';

// --- Zod DoÄŸrulama ÅemalarÄ± (Ã–rnek) ---
import { z } from 'zod';

export const BaseSchema = z.object({
    _id: z.string().optional(), // Genellikle otomatik oluÅŸur
    createdAt: z.date().optional(),
    updatedAt: z.date().optional(),
});

export const UserSchema = BaseSchema.extend({
    name: z.string().min(1, "Ä°sim gereklidir"),
    email: z.string().email("GeÃ§ersiz e-posta adresi"),
    role: z.nativeEnum(UserRole).default(UserRole.Viewer),
    isActive: z.boolean().optional().default(true),
});

// API iÃ§in oluÅŸturma ÅŸemasÄ± (ID ve tarihler olmadan)
export const UserCreateSchema = UserSchema.omit({ _id: true, createdAt: true, updatedAt: true });

```

## âŒ YanlÄ±ÅŸ KullanÄ±m
```typescript
// âŒ YANLIÅ: Tipleri her yerde tekrar tanÄ±mlamak
// API Endpoint:
// interface UserResponse { name: string; email: string; ... }
// Mongoose Model:
// interface IUserDoc { name: string; email: string; ... }

// âŒ YANLIÅ: Genel olmayan veya Ã§ok spesifik tipleri burada tanÄ±mlamak
// type SpecificComponentStateType = { count: number; title: string }; // Bu, component iÃ§inde tanÄ±mlanmalÄ±

// âŒ YANLIÅ: DoÄŸrulama mantÄ±ÄŸÄ±nÄ± tiplerin iÃ§ine gÃ¶mmek (Zod gibi ayrÄ± ÅŸemalar daha iyi)
// interface IUser { email: string; // validateEmail() metodu burada olmamalÄ± }

// âŒ YANLIÅ: `any` veya `object` gibi belirsiz tipleri sÄ±k kullanmak
// type GenericData = any; // Daha spesifik olmalÄ±
```

## ğŸ” Kontrol Listesi

### Kod Kalitesi
- [ ] ArayÃ¼z isimleri `I` ile baÅŸlÄ±yor mu?
- [ ] Tipler aÃ§Ä±k ve anlaÅŸÄ±lÄ±r mÄ±?
- [ ] `any` veya `object` yerine spesifik tipler kullanÄ±lÄ±yor mu?
- [ ] Enumlar mantÄ±ksal gruplamalar iÃ§in mi kullanÄ±lÄ±yor?
- [ ] Zod ÅŸemalarÄ± (varsa) ilgili arayÃ¼zlerle tutarlÄ± mÄ±?
- [ ] Gereksiz veya kullanÄ±lmayan tipler var mÄ±?

### Teknik Gereksinimler
- [ ] TanÄ±mlar uygulama genelinde yeniden kullanÄ±labilir mi?
- [ ] Proje yapÄ±sÄ±na uygun dosya/klasÃ¶rlerde mi tanÄ±mlanmÄ±ÅŸ?

## ğŸ“ Kural Ä°Ã§eriÄŸi YÃ¶nergeleri
- UygulamanÄ±n temel veri yapÄ±larÄ± iÃ§in arayÃ¼zlerle baÅŸlayÄ±n.
- Tekrarlayan deÄŸer kÃ¼meleri iÃ§in enumlarÄ± tanÄ±mlayÄ±n.
- YardÄ±mcÄ± veya birleÅŸik tipler iÃ§in `type` kullanÄ±n.
- EÄŸer kullanÄ±lÄ±yorsa, Zod gibi kÃ¼tÃ¼phanelerle temel doÄŸrulama ÅŸemalarÄ±nÄ± ekleyin.
- Tipleri mantÄ±ksal olarak gruplayÄ±n (Ã¶rn. `user.types.ts`, `shared.types.ts`).

## ğŸ”„ Kural BakÄ±mÄ±
- Yeni temel veri yapÄ±larÄ± eklendikÃ§e gÃ¼ncelleyin.
- Proje genelinde tip ihtiyaÃ§larÄ± deÄŸiÅŸtikÃ§e gÃ¼ncelleyin.
- KullanÄ±lan kÃ¼tÃ¼phanelerin (Ã¶rn. Zod) sÃ¼rÃ¼mleri deÄŸiÅŸtikÃ§e ÅŸemalarÄ± gÃ¼ncelleyin.

## ğŸ§ª Testler
- Bu kural dosyasÄ± genellikle doÄŸrudan test edilmez, ancak bu tipleri kullanan diÄŸer kodlar (API testleri, model testleri) bu tiplerin doÄŸruluÄŸunu dolaylÄ± olarak test eder.
- Zod ÅŸemalarÄ± iÃ§in birim testleri yazÄ±labilir.

## ğŸ’¡ Ä°puÃ§larÄ±
- KarmaÅŸÄ±k nesneler iÃ§in iÃ§ iÃ§e arayÃ¼zler kullanÄ±n.
- TypeScript'in `Utility Types` (Ã¶rn. `Partial<T>`, `Readonly<T>`, `Omit<T, K>`, `Pick<T, K>`) Ã¶zelliklerinden faydalanÄ±n.
- `zod` kullanÄ±yorsanÄ±z, `z.infer<typeof Schema>` ile ÅŸemalardan otomatik olarak TypeScript tipleri tÃ¼retin, bÃ¶ylece tipleri iki kez yazmaktan kurtulun.
  ```typescript
  export const UserSchema = z.object({...});
  export type IUser = z.infer<typeof UserSchema>; // Otomatik tip tÃ¼retme
  ```
