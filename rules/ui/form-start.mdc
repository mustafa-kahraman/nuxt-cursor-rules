---
description:
globs:
alwaysApply: false
---
# Form BaÅŸlatma KurallarÄ± (Nuxt UI + VeeValidate + Zod)

## ğŸ¯ Kural Tipi YapÄ±landÄ±rmasÄ±

### Birincil Kural Tipi SeÃ§imi
- [x] Her zaman: Form davranÄ±ÅŸÄ±nÄ±n tutarlÄ± olmasÄ± iÃ§in
- [ ] Manuel
- [ ] Otomatik EklenmiÅŸ: Form componentleri iÃ§in
- [ ] Ajan TarafÄ±ndan Ä°stenen

type: always
description: Nuxt/Vue UI katmanÄ±nda Nuxt UI bileÅŸenleri ile bir formun temel yapÄ±sÄ±nÄ± kurma, VeeValidate ve Zod ile doÄŸrulama entegrasyonunu baÅŸlatma kurallarÄ±nÄ± tanÄ±mlar. Bu kural, form oluÅŸturmaya baÅŸlamak iÃ§in gerekli adÄ±mlarÄ± iÃ§erir ve detaylÄ± gÃ¶nderim/hata yÃ¶netimi iÃ§in diÄŸer kurallara referans verir.
globs: components/**/*.vue, pages/**/*.vue

## ğŸ“‹ Sorumluluklar

### Ã–n KoÅŸul KontrolÃ¼ (AI TarafÄ±ndan)
- Bu kuralÄ± uygulamadan Ã¶nce, AI ilgili `@types-schema-models.mdc` ve `@zod-schemas.mdc` kurallarÄ±na gÃ¶re gerekli tiplerin ve Zod ÅŸemalarÄ±nÄ±n tanÄ±mlandÄ±ÄŸÄ±nÄ± doÄŸrulamalÄ±dÄ±r. Eksikse, Ã¶nce onlarÄ± oluÅŸturmayÄ± Ã¶nermelidir.

### Temel Form YapÄ±sÄ± (Nuxt UI)
- FormlarÄ± `<UForm>` ile sarmalayÄ±n.
- AlanlarÄ± `<UFormGroup>` ile sarmalayÄ±n (`name` prop'u ÅŸema ile eÅŸleÅŸmeli).
- Nuxt UI girdi bileÅŸenlerini (`<UInput>`, `<USelectMenu>` vb.) kullanÄ±n.

### Temel DoÄŸrulama Entegrasyonu
- Ä°lgili Zod ÅŸemasÄ±nÄ± import edin.
- `toTypedSchema` ile dÃ¶nÃ¼ÅŸtÃ¼rÃ¼p `<UForm>` `:schema` prop'una baÄŸlayÄ±n.
- Form state'ini (`reactive` ile) tanÄ±mlayÄ±n.

### Temel GÃ¶nderim MantÄ±ÄŸÄ±
- `<UForm>` `@submit` olayÄ±nÄ± kullanarak temel gÃ¶nderim fonksiyonunu tanÄ±mlayÄ±n.
- Fonksiyon iÃ§inde basit bir `try...catch` ile API Ã§aÄŸrÄ±sÄ± yapÄ±n ve yÃ¼kleme durumunu yÃ¶netin.
- **DetaylÄ± gÃ¶nderim desenleri ve hata yÃ¶netimi iÃ§in `@form-submission-patterns.mdc` ve `@form-error-handling.mdc` kurallarÄ±na baÅŸvurun.**

### Otomatik Hata GÃ¶sterimi
- `<UFormGroup>`'un otomatik hata gÃ¶steriminden faydalanÄ±n.

## ğŸ§© Anahtar BileÅŸenler
- `<UForm>`: Ana sarmalayÄ±cÄ±.
- `<UFormGroup>`: Alan sarmalayÄ±cÄ± ve otomatik hata gÃ¶sterimi.
- Nuxt UI InputlarÄ±: Form elemanlarÄ±.
- Zod ÅemasÄ± (`@zod-schemas.mdc`): DoÄŸrulama kurallarÄ±.
- `toTypedSchema`: Zod -> VeeValidate dÃ¶nÃ¼ÅŸÃ¼mÃ¼.
- `reactive`: Form state'i.
- `@submit`: Temel gÃ¶nderim olayÄ±.

## ğŸ“¦ BaÄŸÄ±mlÄ±lÄ±klar

### Gerekli Paketler (Projede kurulu sÃ¼rÃ¼mler veya @latest)
- `nuxt`: ^3.x.x
- `@nuxt/ui`: (Proje sÃ¼rÃ¼mÃ¼)
- `vee-validate`: ^4.x.x
- `@vee-validate/zod`: ^4.x.x
- `zod`: ^3.x.x

### Gerekli Kurallar
- @zod-schemas.mdc (DoÄŸrulama ÅŸemalarÄ± iÃ§in)
- @types-schema-models.mdc (Form veri tipleri ve IApiError iÃ§in)
- **Opsiyonel/Ä°leri Seviye:**
    - @form-submission-patterns.mdc (DetaylÄ± gÃ¶nderim mantÄ±ÄŸÄ±)
    - @form-error-handling.mdc (DetaylÄ± hata yÃ¶netimi)

## âœ… DoÄŸru KullanÄ±m (BaÅŸlangÄ±Ã§ Kurulumu)
```vue
<template>
  <UForm
    :schema="formSchema"
    :state="state"
    class="space-y-4"
    @submit="onSubmit"
    ref="nuxtUiForm"
  >
    <UFormGroup label="E-posta" name="email" required>
      <UInput v-model="state.email" />
      <!-- Hata otomatik gÃ¶sterilir -->
    </UFormGroup>

    <UFormGroup label="Åifre" name="password" required>
      <UInput v-model="state.password" type="password" />
    </UFormGroup>

    <UButton type="submit" :loading="loading">
      GiriÅŸ Yap
    </UButton>

    <!-- Temel API Hata GÃ¶sterimi -->
    <UAlert
      v-if="formError"
      color="red"
      variant="soft"
      :title="formError"
      class="mt-4"
    />

  </UForm>
</template>

<script setup lang="ts">
import { ref, reactive } from 'vue';
import { z } from 'zod';
import { toTypedSchema } from '@vee-validate/zod';
import type { FormSubmitEvent, Form } from '#ui/types';

// 1. Zod ÅemasÄ± (Ã–rnek - @zod-schemas.mdc'den gelmeli)
const LoginSchema = z.object({
  email: z.string().email("GeÃ§ersiz e-posta"),
  password: z.string().min(1, "Åifre gerekli"),
});
type LoginFormData = z.output<typeof LoginSchema>;

// 2. ÅemayÄ± DÃ¶nÃ¼ÅŸtÃ¼r
const formSchema = toTypedSchema(LoginSchema);

// 3. Form State
const state = reactive<Partial<LoginFormData>>({
  email: undefined,
  password: undefined,
});

// 4. YÃ¼kleme ve Temel Hata State
const loading = ref(false);
const formError = ref<string | null>(null); // Basit string hata mesajÄ±

// 5. Form ReferansÄ± (Opsiyonel - clear vb. iÃ§in)
const nuxtUiForm = ref<Form<LoginFormData> | null>(null);

// 6. Temel GÃ¶nderim Fonksiyonu
async function onSubmit(event: FormSubmitEvent<LoginFormData>) {
  loading.value = true;
  formError.value = null;
  console.log('GiriÅŸ Denemesi:', event.data);

  try {
    // API Ã§aÄŸrÄ±sÄ±
    await $fetch('/api/login', { method: 'POST', body: event.data });
    alert('GiriÅŸ baÅŸarÄ±lÄ±!');
    // BaÅŸarÄ±lÄ± yÃ¶nlendirme veya state gÃ¼ncelleme burada yapÄ±labilir
    // DetaylÄ± senaryolar iÃ§in @form-submission-patterns.mdc'ye bakÄ±nÄ±z.

  } catch (err: any) {
    console.error("GiriÅŸ HatasÄ±:", err);
    // Temel hata mesajÄ±nÄ± ayarla
    formError.value = err.data?.message || 'GiriÅŸ iÅŸlemi baÅŸarÄ±sÄ±z oldu.';
    // DetaylÄ± hata yÃ¶netimi (alanlara setErrors vb.) iÃ§in
    // @form-error-handling.mdc kuralÄ±na bakÄ±nÄ±z.

  } finally {
    loading.value = false;
  }
}
</script>
```

## âŒ YanlÄ±ÅŸ KullanÄ±m
- `<UForm>`, `<UFormGroup>` kullanmamak.
- Merkezi Zod ÅŸemasÄ± yerine manuel doÄŸrulama yapmak.
- `:schema` prop'unu kullanmadan doÄŸrulama yapmaya Ã§alÄ±ÅŸmak.

## ğŸ” Kontrol Listesi
- [ ] Ã–n koÅŸul tipler/ÅŸemalar kontrol edildi mi (AI)?
- [ ] `<UForm>` kullanÄ±lÄ±yor mu?
- [ ] Alanlar `<UFormGroup>` ile sarmalanmÄ±ÅŸ mÄ±?
- [ ] Zod ÅŸemasÄ± import edilip `toTypedSchema` ile dÃ¶nÃ¼ÅŸtÃ¼rÃ¼lmÃ¼ÅŸ mÃ¼?
- [ ] `:schema` prop'u `<UForm>`'a baÄŸlanmÄ±ÅŸ mÄ±?
- [ ] Form state'i (`reactive`) tanÄ±mlanmÄ±ÅŸ mÄ±?
- [ ] Temel `@submit` fonksiyonu tanÄ±mlanmÄ±ÅŸ mÄ±?

## ğŸ“ Kural Ä°Ã§eriÄŸi YÃ¶nergeleri
- Form oluÅŸturmanÄ±n ilk adÄ±mlarÄ±nÄ± (UForm, UFormGroup, state, schema baÄŸlama) aÃ§Ä±klayÄ±n.
- Ã–n koÅŸul kontrolÃ¼nÃ¼n Ã¶nemini belirtin.
- Temel bir gÃ¶nderim fonksiyonu Ã¶rneÄŸi verin.
- DetaylÄ± gÃ¶nderim ve hata yÃ¶netimi iÃ§in diÄŸer kural dosyalarÄ±na (`@form-submission-patterns.mdc`, `@form-error-handling.mdc`) aÃ§Ä±kÃ§a referans verin.

## ğŸ”„ Kural BakÄ±mÄ±
- Ä°lgili kÃ¼tÃ¼phanelerin (Nuxt UI, VeeValidate, Zod) gÃ¼ncellemelerini takip edin.

## ğŸ§ª Testler
- Component testleri ile:
  - [ ] Formun doÄŸru ÅŸekilde render edildiÄŸini test edin.
  - [ ] GeÃ§ersiz veri ile `@submit` olayÄ±nÄ±n tetiklenmediÄŸini test edin.
  - [ ] GeÃ§erli veri ile `@submit` olayÄ±nÄ±n tetiklendiÄŸini ve `event.data`'nÄ±n doÄŸru olduÄŸunu test edin.
  - [ ] Temel API hata durumunda `formError` state'inin gÃ¼ncellendiÄŸini test edin.

## ğŸ’¡ Ä°puÃ§larÄ±
- Bu kural, form oluÅŸturmanÄ±n temelini atar. GerÃ§ek dÃ¼nya uygulamalarÄ± genellikle daha karmaÅŸÄ±k gÃ¶nderim mantÄ±ÄŸÄ± (`@form-submission-patterns.mdc`) ve hata yÃ¶netimi (`@form-error-handling.mdc`) gerektirir.
- Spesifik Nuxt UI form elemanlarÄ±nÄ±n (`<UInput>`, `<USelectMenu>` vb.) detaylÄ± kullanÄ±mÄ± iÃ§in ilgili eleman kural dosyalarÄ±na bakÄ±n (Ã¶rn. `@ui-input.mdc`).
